<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="layui/css/layui.css">
  <link rel="stylesheet" href="css/font-awesome.css">
  <title>Document</title>
  <link rel="stylesheet" href="css/common.css">
</head>


<body>
  <div class=" scroingList ">
    <!-- <div class="firstLevelBtn" data-type="t">添加一级评分项</div> -->
    <button data-method="offset" data-type="auto" class="layui-btn layui-btn-normal firstLevelBtn">添加一级评分项</button>
    <div class="tableList">
      <table class="table table-hover table-bordered" style="table-layout: fixed;">
        <thead>
          <tr>
            <th>序号</th>
            <th>测评项名称</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          <tr class="parent" id="row_01">
            <td>1</td>
            <td>
              <div class="parentBtn">
                <i class="layui-icon layui-icon-down"></i>
                品质特性评价
              </div>
            </td>
            <td>
              <a href="javascript:;" class="secondLevelBtn">添加下级</a>
              <a href="javascript:;" class="updateFirstBtn">修改</a>
              <a href="javascript:;" class='deleteFirstBtn'>删除</a>
            </td>
          </tr>
          <tr class='child_row_01'>
            <td>2</td>
            <td>20180629103352105</td>
            <td>
              <a href="javascript:;">修改</a>
              <a href="javascript:;">删除</a>
            </td>
          </tr>
          <tr class="child_row_01">
            <td>3</td>
            <td>20180629103352105</td>
            <td>
              <a href="javascript:;">修改</a>
              <a href="javascript:;">删除</a>
            </td>
          </tr>
          <tr class="parent" id="row_02">
            <td>1</td>
            <td>
              <div class="parentBtn">
                <i class="layui-icon layui-icon-down"></i>
                </span> 品质特性评价
              </div>
            </td>
            <td>
              <a href="javascript:;">添加下级</a>
              <a href="javascript:;">修改</a>
              <a href="javascript:;">删除</a>
            </td>
          </tr>
          <tr class='child_row_02'>
            <td>2</td>
            <td>20180629103352105</td>
            <td>
              <a href="javascript:;">修改</a>
              <a href="javascript:;">删除</a>
            </td>
          </tr>
          <tr class="child_row_02">
            <td>3</td>
            <td>20180629103352105</td>
            <td>
              <a href="javascript:;">修改</a>
              <a href="javascript:;">删除</a>
            </td>
          </tr>
          <tr class="parent" id="row_03">
            <td>1</td>
            <td>
              <div class="parentBtn">
                <i class="layui-icon layui-icon-down"></i>
                </span> 品质特性评价
              </div>
            </td>
            <td>
              <a href="javascript:;">添加下级</a>
              <a href="javascript:;">修改</a>
              <a href="javascript:;">删除</a>
            </td>
          </tr>
          <tr class='child_row_03'>
            <td>2</td>
            <td>20180629103352105</td>
            <td>
              <a href="javascript:;">修改</a>
              <a href="javascript:;">删除</a>
            </td>
          </tr>
          <tr class="child_row_03">
            <td>3</td>
            <td>20180629103352105</td>
            <td>
              <a href="javascript:;">修改</a>
              <a href="javascript:;">删除</a>
            </td>
          </tr>

        </tbody>
      </table>
    </div>
    <div id="firstLevel" class="hide">
      <div class="col-sm-4 leabellist">评分项名称:</div>
      <div class="col-sm-8">
        <input type="text" class="form-control">
      </div>
    </div>
    <div id="deleteModle" class="hide">


      信息删除后无法恢复，是否确定删除


      <div class="col-sm-5 leabellist">评分项名称:</div>
      <div class="col-sm-7 content">
        品质特性评价
      </div>
    </div>
    <!-- <div id="deleteModle" class="hide">
      <div class="col-sm-4 leabellist">评分项名称:</div>
      <div class="col-sm-8">
        品质特性评价
      </div>
    </div> -->

  </div>

</body>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="layui/layui.js"></script>
<script>
  $(function () {
    $('.tableList').find('tr').hide()
    $('.parent').show()
    $(".parentBtn").click(function () { // 展开显示
      let id = $(this).parent().parent()[0].id
      $('.child_' + id).slideToggle(0)
      if ($(this).children().hasClass('layui-icon-down')) {
        $(this).children().removeClass('layui-icon-down').addClass('layui-icon-up')
      } else {
        $(this).children().removeClass('layui-icon-up').addClass('layui-icon-down')
      }
    });

    layui.use(['layer'], function () {
      var layer = layui.layer
    })

    function addScoring(type, title) {
      console.log(type, title)
      layer.open({
        type: 1,
        title: title + '评分项',
        area: ['300px', '180px'],
        content: $('#firstLevel'),
        btn: '确定',
        btnAlign: 'c', //按钮居
        yes: function () {
          $('#firstLevel').addClass('hide')
          layer.closeAll();
        },
        cancel: function () {
          //右上角关闭回调
          $('#firstLevel').addClass('hide')
          layer.closeAll()

          //return false 开启该代码可禁止点击该按钮关闭
        }
      });
    }

    function deleteScoring() {
      layer.open({
        type: 1,
        title: '删除评分项',
        area: ['300px', '180px'],
        content: $('#deleteModle'),
        btn: '确定',
        btnAlign: 'c',
        yes: function () {
          $('#deleteModle').addClass('hide')
          layer.closeAll()
        },
        cancel: function () {
          //右上角关闭回调
          $('#deleteModle').addClass('hide')
          layer.closeAll()
          //return false 开启该代码可禁止点击该按钮关闭
        }
      })
    }
    $('.firstLevelBtn').on('click', function () { //添加一级评分
      $('#firstLevel').removeClass('hide')
      addScoring(type = '1', title = '添加')
    })
    $('.secondLevelBtn').on('click', function () {
      $('#firstLevel').removeClass('hide')
      addScoring(type = '2', title = '添加')
    })
    $('.updateFirstBtn').on('click', function () {
      $('#firstLevel').removeClass('hide')
      addScoring(type = '3', title = '修改')
    })
    $('.deleteFirstBtn').on('click', function () {
      $('#deleteModle').removeClass('hide')
      deleteScoring()
    })
  })
</script>

</html>